<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>HTML Calculator</title>
        <link href="vendor/bootstrap/css/bootstrap.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

        <style>
            .calc-btn{
                width: 60px;
                height: 60px;
            }
            .calc-display{
                background-color: rgb(204, 147, 222);
                color: black;
                height: 100px;
                width: 310px;
                border-radius: 5px;
                margin-top: 15px;
            }
            .inputString{
                margin-top: 5px;
                height: 20px;
                display: block;
                font-size: 20px;
            }
            .expressionString{
                margin-top: 5px;
                height: 20px;
                display: block;
                font-size: 20px;
            }
            .valueString{
                margin-top: 5px;
                height: 20px;
                display: block;
                font-size: 20px;
            }
            
        </style>
    </head>
    <body>
        <header>
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <a href="#" class="navbar-brand">
                        <img src="assets/salif_logo.jpg" height="100" alt="Brand logo">
                    </a>
                    <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar1">
                        <i class="bi bi-list"></i>
                    </button>
                    <div class="collapse navbar-collapse" id="navbar1">
                        <div class="navbar-nav ms-auto">
                            <a href="index.html" class="nav-item nav-link active">Home</a>
                            <a href="aboutUs.html" class="nav-item nav-link active">About Us</a>
                        </div>
                    </div>
                </div>
            </nav>
        </header>
        <div class="container p-5">
            <div class="d-flex justify-content-center">
                <div class="col-sm-12 col-md-4 col-lg-4">
                    <div class="card" style="background-image: url('assets/calc_bg.jpg');">
                        <div class="d-flex justify-content-center align-items-center p-3">
                            <div class="row">
                                <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 calc-display">
                                    <div id="number_div" class="inputString"></div>
                                    <div id="expression" class="expressionString"></div>
                                    <div id="value_div" class="valueString"></div>
                                </div>    
                                <input type="hidden" id="savedExpression">         
                            </div>
                        </div>
                        <div class="d-flex justify-content-center align-items-center p-3">
                            <div class="row">
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="NumLock"><small>Num Lock</small></button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event _key="Delete">CE</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="Delete">Del</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="/">/</button>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex justify-content-center align-items-center p-3">
                            <div class="row">
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="7">7</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="8">8</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="9">9</button>
                                    </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="*">x</button>
                                </div>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center align-items-center p-3">
                            <div class="row">
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="4">4</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="5">5</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="6">6</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="-" data-event_key="-">-</button>
                                </div>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center align-items-center p-3">
                            <div class="row">
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="1">1</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="2">2</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="3">3</button>
                                    </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="+">+</button>
                                </div>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center align-items-center p-3">
                            <div class="row">
                                <div class="col-sm-6 col-md-6 col-lg-6 col-xl-6">
                                    <button type="button" class="btn btn-light" style="height: 60px; width: 150px;" data-event_key="0">0</button>
                                    </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key=".">.</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="=">=</button>
                                </div>
                            </div>
                        </div>             
                    </div>
                </div>
            </div>
        </div>

        <footer class="bg-dark">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <div class="container m-5">
                            <img src="assets/salif_logo.jpg" height="30px" class="bg-white">
                            <div>
                                <p class="text-white">The HTML Calculator project, developed as a minor project, represents an implementation of a versatile and user-friendly calculator application utilizing HTML, CSS, Bootstrap, and jQuery technologies. This calculator aims to provide a comprehensive solution for performing basic arithmetic operations conveniently within a web-based environment. The design prioritizes simplicity and functionality, featuring a well-organized layout with distinct sections for displaying input, expression, and result.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="text-white text-center">
                        <p>All Rights Reserved &copy 2022, <a href="shaikhsalif50@gmail.com">shaikhsalif@mail</a></p>
                    </div>
                </div>
            </div>
        </footer>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
        <script src="vendor/bootstrap/js/bootstrap.js"></script>
        <script>
            $(document).on('keypress',function(e){
                $('button[data-event_key="'+e.key+'"]').addClass('active')
                if((e.keyCode >= 48 && e.keyCode<=57) || (e.keyCode>=96 && e.keyCode<=105)){
                    appendNumber(e.key)
                }else{
                    if(e.key== '+' || e.key == '-' || e.key=='.' || e.key=='*'){
                        generateExpression(e.key)
                    }else if(key == '='){
                        evaluateExpression()
                    }else if(key == 'Delete'){
                        clearCalc();
                    }
                }
                console.log(e.key);
            })

            $(document).on('keyup',function(e){
                $('button[data-event_key="'+e.key+'"]').removeClass('active')
                console.log(e.key);
            })

            $('.calc-btn').on('click',function(e){
                var key = $(this).data('event_key')
                if(key != '+' && key != '-' && key != '=' && key != '.' && key != '*' && key != '/' && key != 'Delete' && key != 'NumLock'){
                    appendNumber(key)
                }else{
                    if(key== '+' || key == '-' || key=='.' || key=='*'){
                        generateExpression(key)
                    }else if(key == '='){
                        evaluateExpression()
                    }else if(key == 'Delete'){
                        clearCalc();
                    }
                }
                console.log(key)
            })

            function appendNumber(number){
               var existingNumber = $("#number_div").html();
               var currentString = number;
               var outputString = '';
               if(existingNumber != '' && existingNumber != undefined && existingNumber != null){
                    if(existingNumber == 0){
                        outputString = number
                    }else{
                        outputString = existingNumber += currentString;
                    }
               }else{
                    outputString = currentString;
               }
               $("#number_div").html(outputString);
            }

            function generateExpression(operator){
                var existingNumber = $("#number_div").html();
                var currentOperator =operator;
                var expression='';
                var savedExpression = $("#savedExpression").val();
                if(savedExpression == '' || savedExpression == null || savedExpression == undefined){
                    expression = parseInt(existingNumber) + currentOperator;
                }else{
                    expression = savedExpression + existingNumber + currentOperator;
                }
                $("#savedExpression").val(expression);
                $("#expression").html(expression);
                $("#number_div").html("");
            }

            function evaluateExpression(){
                var result ='';
                var expression= $("#savedExpression").val();
                var existingNumber = $("#number_div").html();
                if(existingNumber != '' || existingNumber != null || existingNumber != undefined){
                    expression = expression + parseInt(existingNumber);
                    $("#expression").html(expression);
                }
                result = eval(expression);
                $("#savedExpression").val("");
                $("#number_div").html(result);
                $("#value_div").html(result);
            }

            function clearCalc(){
                $("#savedExpression").val("");
                $("#expression").html("");
                $("#number_div").html("");
                $("#value_div").html("");
            }
        </script>
    </body>
</html>